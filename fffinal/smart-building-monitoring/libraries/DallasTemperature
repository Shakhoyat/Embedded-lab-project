// DallasTemperature library header file
// This file provides the interface for the DallasTemperature library, which is used to read temperature data from DS18B20 sensors.

#ifndef DALLASTEMPERATURE_H
#define DALLASTEMPERATURE_H

#include <OneWire.h>

// Define the OneWire bus
OneWire oneWire(2); // Change pin number as needed

class DallasTemperature {
public:
    DallasTemperature();
    void begin();
    float getTemperature();
private:
    byte address[8];
    void requestTemperatures();
    float readTemperature();
};

DallasTemperature::DallasTemperature() {
    // Constructor
}

void DallasTemperature::begin() {
    // Initialize the OneWire bus
    oneWire.reset();
}

void DallasTemperature::requestTemperatures() {
    // Request temperature from the sensor
    oneWire.reset();
    oneWire.write(0xCC); // Skip ROM
    oneWire.write(0x44); // Start conversion
}

float DallasTemperature::getTemperature() {
    requestTemperatures();
    return readTemperature();
}

float DallasTemperature::readTemperature() {
    // Read temperature from the sensor
    oneWire.reset();
    oneWire.write(0xCC); // Skip ROM
    oneWire.write(0xBE); // Read scratchpad

    for (int i = 0; i < 8; i++) {
        address[i] = oneWire.read();
    }

    // Convert the raw data to temperature
    int16_t rawTemperature = (address[1] << 8) | address[0];
    return (float)rawTemperature / 16.0;
}

#endif // DALLASTEMPERATURE_H